<p-toast></p-toast>
<p-toolbar styleClass="mb-4 gap-2">
    <ng-template pTemplate="left">
        <button pButton pRipple label="Ajouter" icon="pi pi-plus" class="p-button-success mr-2"
            (click)="openNew()"></button>

    </ng-template>


</p-toolbar>

<p-table #dt1 dataKey="id" [loading]="loading" [columns]="cols" [value]="entitys"
    [tableStyle]="{ 'min-width': '50rem' }" sortMode="multiple" [(selection)]="selectedEntitys"
    styleClass="p-datatable-sm" [paginator]="true" [rows]="10" [showCurrentPageReport]="true"
    currentPageReportTemplate="Affichage {first} à {last} de {totalRecords} entrées" (onPage)="pageChange($event)"
    [rowsPerPageOptions]="[10, 25, 50, 100]">
    <ng-template pTemplate="caption">
        <div class="flex">
            <h5 style="font-size: 1rem" class="m-0">Tableau d'admins</h5>
            <button pButton label="Clair" class="p-button-outlined" icon="pi pi-filter-slash"
                (click)="clear(dt1)"></button>
        </div>
    </ng-template>
    <ng-template pTemplate="header">
        <tr>
            <th *ngFor="let col of cols" pSortableColumn="{{ col.field }}">
                <p-sortIcon field="{{ col.field }}"></p-sortIcon>
                {{ col.header }}
                <p-columnFilter type="text" field="{{ col.field }}" display="menu"></p-columnFilter>
            </th>
            <th></th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-entity>
        <tr>
            <td>{{ entity.email }}</td>
            <td><span style="filter: blur(3px);cursor: not-allowed;user-select: none;">{{ entity.password }}</span></td>
            <td>
                <div *ngIf="entity.status; else elseBlock">
                    <!-- Content to show when condition is true -->
                    <p-tag icon="pi pi-lock-open" severity="success" value="Enabled"></p-tag>
                </div>
                <ng-template #elseBlock>
                    <!-- Content to show when condition is false -->
                    <p-tag icon="pi pi-lock" severity="danger" value="Disabled"></p-tag>
                </ng-template>
            </td>
            <td style="
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 5px;
            ">
                <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success mr-2"
                    (click)="editEntity(entity)" style="width: 30px; height: 30px"></button>
                <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning"
                    (click)="deleteEntity(entity)" style="width: 30px; height: 30px"></button>
            </td>
        </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
        <tr>
            <td colspan="7">Aucun Admin Trouve</td>
        </tr>
    </ng-template>
</p-table>

<p-dialog [(visible)]="entityDialog" [style]="{ width: '450px' }" header="Formulaire d'admin" [modal]="true"
    styleClass="p-fluid" class="p-dialog-content">
    <ng-template style="height: 1000px" pTemplate="content">
        <div class="field ng-star-inserted">
            <label for="status">Status</label>
            <p-dropdown [(ngModel)]="entity.status" inputId="status" [options]="status">
                <ng-template pTemplate="selectedItem">
                    <p-tag [value]="status[0]" severity="danger"></p-tag>
                </ng-template>
            </p-dropdown>
        </div>
        <div class="field ng-star-inserted">
            <label for="name">AdminName</label>
            <input type="text" pInputText id="name" [(ngModel)]="entity.email" required autofocus class="p-inputtext" />
            <small class="p-error" *ngIf="submitted && !entity.email">AdminName is required.</small>
        </div>
        <div class="field ng-star-inserted">
            <label for="name">Password</label>
            <input type="text" pInputText id="name" [(ngModel)]="entity.email" required autofocus class="p-inputtext" />
            <small class="p-error" *ngIf="submitted && !entity.email">AdminName is required.</small>
        </div>
    </ng-template>

    <ng-template pTemplate="footer">
        <button pButton pRipple label="Fermer" icon="pi pi-times" class="p-button-text" (click)="hideDialog()"></button>
        <button pButton pRipple label="Ajouter" icon="pi pi-check" class="p-button-text"
            (click)="saveProduct()"></button>
    </ng-template>
</p-dialog>

<p-confirmDialog [style]="{ width: '450px' }"></p-confirmDialog>